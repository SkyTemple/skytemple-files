#  Copyright 2020-2024 Capypara and the SkyTemple Contributors
#
#  This file is part of SkyTemple.
#
#  SkyTemple is free software: you can redistribute it and/or modify
#  it under the terms of the GNU General Public License as published by
#  the Free Software Foundation, either version 3 of the License, or
#  (at your option) any later version.
#
#  SkyTemple is distributed in the hope that it will be useful,
#  but WITHOUT ANY WARRANTY; without even the implied warranty of
#  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
#  GNU General Public License for more details.
#
#  You should have received a copy of the GNU General Public License
#  along with SkyTemple.  If not, see <https://www.gnu.org/licenses/>.
from __future__ import annotations

import unittest


# {"mode":"generate","input":{"missionType":0,"missionSpecial":0,"nullBits":0,"mailType":4,"restriction":0,"restrictionType":0,"rewardType":3,"client":1,"target":1,"target2":0,"reward":15,"targetItem":109,"dungeon":1,"floor":1,"specialFloor":0,"flavorText":300000},"is_eu":false,"steps":[{"command":"calculateChecksum","in":"0000000000000000000001000000010000010010010011111000000000000000000000000111100110001101101000000000000000000000100000000001000000000100","out":952882087},{"command":"structureToBits","in":{"missionType":0,"missionSpecial":0,"nullBits":0,"mailType":4,"restriction":0,"restrictionType":0,"rewardType":3,"client":1,"target":1,"target2":0,"reward":15,"targetItem":109,"dungeon":1,"floor":1,"specialFloor":0,"flavorText":300000},"out":"00000000000000000000000100000001000001001001001111100000000000000000000000011110011000110110100000000000000000000010000000000100000000010000111000110010111101001110100111"},{"command":"getResetByte","in":952882087,"out":-1},{"command":"encryptionEntries","in":167,"out":[181,118,47,168,122,200,129,6,187,133,117,17,12,210,209,201,248]},{"command":"getResetByte","in":952882087,"out":-1},{"command":"encryptBitStream","in":"00000000000000000000000100000001000001001001001111100000000000000000000000011110011000110110100000000000000000000010000000000100000000010000111000110010111101001110100111","out":"00111110001100100111010101110101100001111001100000111101011000010110111011011111110000111001101000011110101010100010101111100001101011100100111000110010111101001110100111"},{"command":"bitsToBytes","in":"00111110001100100111010101110101100001111001100000111101011000010110111011011111110000111001101000011110101010100010101111100001101011100100111000110010111101001110100111","out":"9QHKS3PK83#5+Q6TX1W-%7-@&C9SQ+9219"},{"command":"scrambleString","in":"9QHKS3PK83#5+Q6TX1W-%7-@&C9SQ+9219","out":"7K9QS&P91#+21H9X6-C-%S@8+93Q3W5KQT"}],"output":"7K9QS &P91#+2 1H9X6\n-C-%S @8+93Q3 W5KQT"}
# {"mode":"generate","input":{"missionType":0,"missionSpecial":0,"nullBits":0,"mailType":4,"restriction":0,"restrictionType":0,"rewardType":3,"client":1,"target":1,"target2":0,"reward":15,"targetItem":109,"dungeon":1,"floor":1,"specialFloor":0,"flavorText":300000},"is_eu":true,"steps":[{"command":"calculateChecksum","in":"0000000000000000000001000000010000010010010011111000000000000000000000000111100110001101101000000000000000000000100000000001000000000100","out":952882087},{"command":"structureToBits","in":{"missionType":0,"missionSpecial":0,"nullBits":0,"mailType":4,"restriction":0,"restrictionType":0,"rewardType":3,"client":1,"target":1,"target2":0,"reward":15,"targetItem":109,"dungeon":1,"floor":1,"specialFloor":0,"flavorText":300000},"out":"00000000000000000000000100000001000001001001001111100000000000000000000000011110011000110110100000000000000000000010000000000100000000010000111000110010111101001110100111"},{"command":"getResetByte","in":952882087,"out":-1},{"command":"encryptionEntries","in":167,"out":[181,118,47,168,122,200,129,6,187,133,117,17,12,210,209,201,248]},{"command":"getResetByte","in":952882087,"out":-1},{"command":"encryptBitStream","in":"00000000000000000000000100000001000001001001001111100000000000000000000000011110011000110110100000000000000000000010000000000100000000010000111000110010111101001110100111","out":"00111110001100100111010101110101100001111001100000111101011000010110111011011111110000111001101000011110101010100010101111100001101011100100111000110010111101001110100111"},{"command":"bitsToBytes","in":"00111110001100100111010101110101100001111001100000111101011000010110111011011111110000111001101000011110101010100010101111100001101011100100111000110010111101001110100111","out":"9QHKS3PK83#5+Q6TX1W-%7-@&C9SQ+9219"},{"command":"scrambleString","in":"9QHKS3PK83#5+Q6TX1W-%7-@&C9SQ+9219","out":"519HQ6X%2SPSQ-9989T+#&QWK+C7-13@K3"}],"output":"519HQ 6X%2SPS Q-998\n9T+#& QWK+C7- 13@K3"}
# {"mode":"generate","input":{"missionType":9,"missionSpecial":1,"nullBits":0,"mailType":4,"restriction":0,"restrictionType":0,"rewardType":4,"client":39,"target":1,"target2":0,"reward":15,"targetItem":14,"dungeon":21,"floor":33,"specialFloor":0,"flavorText":2},"is_eu":true,"steps":[{"command":"calculateChecksum","in":"0000000000000000100001000101010000000000000000000000100000000000000000000111101000000001110000000000000000000000100000100111000110010100","out":1640534026},{"command":"structureToBits","in":{"missionType":9,"missionSpecial":1,"nullBits":0,"mailType":4,"restriction":0,"restrictionType":0,"rewardType":4,"client":39,"target":1,"target2":0,"reward":15,"targetItem":14,"dungeon":21,"floor":33,"specialFloor":0,"flavorText":2},"out":"00000000000000000010000100010101000000000000000000000010000000000000000000011110100000000111000000000000000000000010000010011100011001010001100001110010001001000000001010"},{"command":"encryptionEntries","in":10,"out":[150,42,124,97,188,108,9,153,63,117,46,5,126,4,208,166,199]},{"command":"getResetByte","in":1640534026,"out":-1},{"command":"encryptBitStream","in":"00000000000000000010000100010101000000000000000000000010000000000000000000011110100000000111000000000000000000000010000010011100011001010001100001110010001001000000001010","out":"00110001111010011001010100010110000111111000000101001101100111010100111111000100110000101000101100101111000110000111111110100110110010101001100001110010001001000000001010"},{"command":"bitsToBytes","in":"00110001111010011001010100010110000111111000000101001101100111010100111111000100110000101000101100101111000110000111111110100110110010101001100001110010001001000000001010","out":"+&P5340R%HWN8@MR+1P@C=28R4W4R+2H98"},{"command":"scrambleString","in":"+&P5340R%HWN8@MR+1P@C=28R4W4R+2H98","out":"N1WP&M+CH304R2+2%8R8WR@P5+4=@948RH"}],"output":"N1WP& M+CH304 R2+2%\n8R8WR @P5+4=@ 948RH"}
# {"mode":"generate","input":{"missionType":10,"missionSpecial":0,"nullBits":0,"mailType":4,"restriction":0,"restrictionType":0,"rewardType":0,"client":81,"target":1,"target2":0,"reward":109,"targetItem":109,"dungeon":102,"floor":33,"specialFloor":0,"flavorText":2},"is_eu":false,"steps":[{"command":"calculateChecksum","in":"0000000000000000100001011001100000000000000000000000100000000000000000110110100000001101101000000000000000000000100001010001000010100100","out":1372946647},{"command":"structureToBits","in":{"missionType":10,"missionSpecial":0,"nullBits":0,"mailType":4,"restriction":0,"restrictionType":0,"rewardType":0,"client":81,"target":1,"target2":0,"reward":109,"targetItem":109,"dungeon":102,"floor":33,"specialFloor":0,"flavorText":2},"out":"00000000000000000010000101100110000000000000000000000010000000000000000011011010000000110110100000000000000000000010000101000100001010010001010001110101011000000011010111"},{"command":"encryptionEntries","in":215,"out":[67,255,195,179,50,122,62,156,163,194,171,16,96,153,251,8,138]},{"command":"getResetByte","in":1372946647,"out":-1},{"command":"encryptBitStream","in":"00000000000000000010000101100110000000000000000000000010000000000000000011011010000000110110100000000000000000000010000101000100001010010001010001110101011000000011010111","out":"00100010100000100010000000001100010110000000010000101100111100001010100110000001000100101100011010001100101011001101001000000011111110011101010001110101011000000011010111"},{"command":"bitsToBytes","in":"00100010100000100010000000001100010110000000010000101100111100001010100110000001000100101100011010001100101011001101001000000011111110011101010001110101011000000011010111","out":"K8&#QFQ3Y&M8#2FN#76S+6Y-4&17N&76+P"},{"command":"scrambleString","in":"K8&#QFQ3Y&M8#2FN#76S+6Y-4&17N&76+P","out":"637N74QK7M#6+&1#FS&Y+Q-Y&PF8&68#2N"}],"output":"637N7 4QK7M#6 +&1#F\nS&Y+Q -Y&PF8& 68#2N"}
# {"mode":"generate","input":{"missionType":12,"missionSpecial":0,"nullBits":0,"mailType":4,"restriction":0,"restrictionType":0,"rewardType":1,"client":422,"target":422,"target2":0,"reward":109,"targetItem":109,"dungeon":91,"floor":4,"specialFloor":136,"flavorText":4},"is_eu":false,"steps":[{"command":"calculateChecksum","in":"0000001000100000000100010110110000000000000000000001000000000000000000110110100010001101101000000000000011010011000110100110000011000100","out":3496409705},{"command":"structureToBits","in":{"missionType":12,"missionSpecial":0,"nullBits":0,"mailType":4,"restriction":0,"restrictionType":0,"rewardType":1,"client":422,"target":422,"target2":0,"reward":109,"targetItem":109,"dungeon":91,"floor":4,"specialFloor":136,"flavorText":4},"out":"00000000100010000000010001011011000000000000000000000100000000000000000011011010001000110110100000000000001101001100011010011000001100010011010000011001101111101001101001"},{"command":"encryptionEntries","in":105,"out":[129,235,103,243,235,140,71,147,206,42,175,53,244,116,135,80,44]},{"command":"getResetByte","in":3496409705,"out":-1},{"command":"encryptBitStream","in":"00000000100010000000010001011011000000000000000000000100000000000000000011011010001000110110100000000000001101001100011010011000001100010011010000011001101111101001101001","out":"00001011100111000010011000111000001111010000110101101111110010101011010001111110111101010000101100111010111100011010000001010010110100010111010000011001101111101001101001"},{"command":"bitsToBytes","in":"00001011100111000010011000111000001111010000110101101111110010101011010001111110111101010000101100111010111100011010000001010010110100010111010000011001101111101001101001","out":"0C@T8FKF#+&T3JCRH@@NTJ3KJ6Q6XS7XX6"},{"command":"scrambleString","in":"0C@T8FKF#+&T3JCRH@@NTJ3KJ6Q6XS7XX6","out":"JF7X6JK0@&3XX@QHCN63T8K#S6FC+@TTJR"}],"output":"JF7X6 JK0@&3X X@QHC\nN63T8 K#S6FC+ @TTJR"}
# {"mode":"generate","input":{"missionType":11,"missionSpecial":1,"nullBits":0,"mailType":4,"restriction":0,"restrictionType":0,"rewardType":5,"client":150,"target":150,"target2":0,"reward":150,"targetItem":109,"dungeon":81,"floor":5,"specialFloor":145,"flavorText":5},"is_eu":true,"steps":[{"command":"calculateChecksum","in":"0000001001000100000101010100010000000000000000000001010000000000000001001011001010001101101000000000000001001011000010010110000110110100","out":574507761},{"command":"structureToBits","in":{"missionType":11,"missionSpecial":1,"nullBits":0,"mailType":4,"restriction":0,"restrictionType":0,"rewardType":5,"client":150,"target":150,"target2":0,"reward":150,"targetItem":109,"dungeon":81,"floor":5,"specialFloor":145,"flavorText":5},"out":"00000000100100010000010101010001000000000000000000000101000000000000000100101100101000110110100000000000000100101100001001011000011011010000100010001111100100101011110001"},{"command":"encryptionEntries","in":241,"out":[232,252,75,13,74,122,72,201,176,199,166,208,4,126,5,46,117]},{"command":"getResetByte","in":574507761,"out":-1},{"command":"encryptBitStream","in":"00000000100100010000010101010001000000000000000000000101000000000000000100101100101000110110100000000000000100101100001001011000011011010000100010001111100100101011110001","out":"00011101110111001000011010110000100000010011010000101110101100011110110100011110111101010100011010010010100101100001010100010111011001110000100010001111100100101011110001"},{"command":"bitsToBytes","in":"00011101110111001000011010110000100000010011010000101110101100011110110100011110111101010100011010010010100101100001010100010111011001110000100010001111100100101011110001","out":"5KM3N54CQ7J4RR0NJ@@F%N#K486PSTFXKN"},{"command":"scrambleString","in":"5KM3N54CQ7J4RR0NJ@@F%N#K486PSTFXKN","out":"4@6MK0J%XN4PS#5FQNNRJ4R@3T8NFK5KC7"}],"output":"4@6MK 0J%XN4P S#5FQ\nNNRJ4 R@3T8NF K5KC7"}
# {"mode":"generate","input":{"missionType":6,"missionSpecial":0,"nullBits":0,"mailType":4,"restriction":0,"restrictionType":0,"rewardType":4,"client":639,"target":639,"target2":0,"reward":48,"targetItem":34,"dungeon":81,"floor":5,"specialFloor":0,"flavorText":5},"is_eu":false,"steps":[{"command":"calculateChecksum","in":"0000000000000000000101010100010000000000000000000001010000000000000000011000001000000100010000000000000100111111101001111111000001100100","out":3744802888},{"command":"structureToBits","in":{"missionType":6,"missionSpecial":0,"nullBits":0,"mailType":4,"restriction":0,"restrictionType":0,"rewardType":4,"client":639,"target":639,"target2":0,"reward":48,"targetItem":34,"dungeon":81,"floor":5,"specialFloor":0,"flavorText":5},"out":"00000000000000000000010101010001000000000000000000000101000000000000000001100000100000010001000000000000010011111110100111111100000110010011011111001101010010100001001000"},{"command":"encryptionEntries","in":72,"out":[22,97,59,154,233,84,53,58,122,176,255,214,140,163,112,63,203]},{"command":"getResetByte","in":3744802888,"out":-1},{"command":"encryptBitStream","in":"00000000000000000000010101010001000000000000000000000101000000000000000001100000100000010001000000000000010011111110100111111100000110010011011111001101010010100001001000","out":"00110010110011111110000101111001111000110011010110000100111011000001111011101111000011100110010100111010101101100111100010010100010111101011011111001101010010100001001000"},{"command":"bitsToBytes","in":"00110010110011111110000101111001111000110011010110000100111011000001111011101111000011100110010100111010101101100111100010010100010111101011011111001101010010100001001000","out":"F7++CY#Y5M1CTJCM26YK91X7-8NY@7@9#8"},{"command":"scrambleString","in":"F7++CY#Y5M1CTJCM26YK91X7-8NY@7@9#8","out":"1Y@@Y-#F61T9#+N2CK8X9C7578Y7MYC+JM"}],"output":"1Y@@Y -#F61T9 #+N2C\nK8X9C 7578Y7M YC+JM"}
# {"mode":"generate","input":{"missionType":4,"missionSpecial":0,"nullBits":0,"mailType":4,"restriction":0,"restrictionType":0,"rewardType":6,"client":639,"target":639,"target2":0,"reward":639,"targetItem":34,"dungeon":81,"floor":5,"specialFloor":0,"flavorText":5},"is_eu":false,"steps":[{"command":"calculateChecksum","in":"0000000000000000000101010100010000000000000000000001010000000000000100111111101100000100010000000000000100111111101001111111000001000100","out":2046615063},{"command":"structureToBits","in":{"missionType":4,"missionSpecial":0,"nullBits":0,"mailType":4,"restriction":0,"restrictionType":0,"rewardType":6,"client":639,"target":639,"target2":0,"reward":639,"targetItem":34,"dungeon":81,"floor":5,"specialFloor":0,"flavorText":5},"out":"00000000000000000000010101010001000000000000000000000101000000000000010011111110110000010001000000000000010011111110100111111100000100010001111001111111001101111000010111"},{"command":"encryptionEntries","in":23,"out":[60,72,128,123,70,103,1,23,89,184,250,112,192,68,120,72,251]},{"command":"getResetByte","in":2046615063,"out":16},{"command":"encryptBitStream","in":"00000000000000000000010101010001000000000000000000000101000000000000010011111110110000010001000000000000010011111110100111111100000100010001111001111111001101111000010111","out":"00001111000100100010001101100010001100000001110000000011101011100001101100000100100000010110100111010001111011101000100111001110001000000001111001111111001101111000010111"},{"command":"bitsToBytes","in":"00001111000100100010001101100010001100000001110000000011101011100001101100000100100000010110100111010001111011101000100111001110001000000001111001111111001101111000010111","out":"K4K2W364120H%NQHR4P183=64N45187036"},{"command":"scrambleString","in":"K4K2W364120H%NQHR4P183=64N45187036","out":"3471546K40%03K4RQ1N=8W6186342PH2NH"}],"output":"34715 46K40%0 3K4RQ\n1N=8W 6186342 PH2NH"}
# {"mode":"generate","input":{"missionType":4,"missionSpecial":0,"nullBits":0,"mailType":4,"restriction":0,"restrictionType":0,"rewardType":1,"client":666,"target":666,"target2":0,"reward":81,"targetItem":24,"dungeon":17,"floor":2,"specialFloor":0,"flavorText":5},"is_eu":true,"steps":[{"command":"calculateChecksum","in":"0000000000000000000010000100010000000000000000000001010000000000000000101000100010000011000000000000000101001101001010011010000001000100","out":3318892083},{"command":"structureToBits","in":{"missionType":4,"missionSpecial":0,"nullBits":0,"mailType":4,"restriction":0,"restrictionType":0,"rewardType":1,"client":666,"target":666,"target2":0,"reward":81,"targetItem":24,"dungeon":17,"floor":2,"specialFloor":0,"flavorText":5},"out":"00000000000000000000001000010001000000000000000000000101000000000000000010100010001000001100000000000000010100110100101001101000000100010011000101110100100100011000110011"},{"command":"encryptionEntries","in":51,"out":[40,108,156,7,164,203,63,112,163,140,214,255,176,122,58,53,84]},{"command":"getResetByte","in":3318892083,"out":14},{"command":"encryptBitStream","in":"00000000000000000000001000010001000000000000000000000101000000000000000010100010001000001100000000000000010100110100101001101000000100010011000101110100100100011000110011","out":"00100111000110110000110000101111101011000011111111111010101000110010100101111110001100001011001011101001010101010011000101000011000110110011000101110100100100011000110011"},{"command":"bitsToBytes","in":"00100111000110110000110000101111101011000011111111111010101000110010100101111110001100001011001011101001010101010011000101000011000110110011000101110100100100011000110011","out":"C55PQ7CTSF50JMX278@#+8+QW9SQ#14T3P"},{"command":"scrambleString","in":"C55PQ7CTSF50JMX278@#+8+QW9SQ#14T3P","out":"08S55X7+TQCQ#+C4SP2J5WM@P198#37QTF"}],"output":"08S55 X7+TQCQ #+C4S\nP2J5W M@P198# 37QTF"}


class MailTestCase(unittest.TestCase):
    pass  # todo
